# ğŸ”¬ Deep Research CLI

> Agente de pesquisa profunda com IA - ImplementaÃ§Ã£o em Rust

[![Rust](https://img.shields.io/badge/Rust-1.70+-orange.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## ğŸ“‹ Ãndice

- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)
- [Comandos CLI](#-comandos-cli)
- [Atalhos TUI](#-atalhos-tui)
- [Interface TUI](#-interface-tui)
  - [Guia de AnÃ¡lise](#tui-guide--guia-de-anÃ¡lise-da-interface)
  - [Tela de Input](#-tela-1-input-entrada-de-pergunta)
  - [Tela de Research](#-tela-2-research-pesquisa-em-andamento)
  - [Tela de Result](#-tela-3-result-resultado-final)
  - [Tela de Erro](#-tela-de-erro)
  - [Mapa de Cores](#-mapa-de-cores-da-interface)
  - [DiagnÃ³stico](#-diagnÃ³stico-e-troubleshooting)
- [AÃ§Ãµes do Agente](#-aÃ§Ãµes-do-agente)
- [Eventos](#-eventos)
- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)
- [Exemplos](#-exemplos)

---

## ğŸš€ InstalaÃ§Ã£o

```bash
# Clonar e compilar
cd rust-implementation
cargo build --release

# Executar
./target/release/deep-research-cli "sua pergunta"
```

### VariÃ¡veis de Ambiente NecessÃ¡rias

```bash
# Criar arquivo .env na raiz do projeto
OPENAI_API_KEY=sua-chave-openai
JINA_API_KEY=sua-chave-jina
```

---

## ğŸ’» Comandos CLI

### `[bÃ¡sico]` Modo PadrÃ£o

Executa uma pesquisa direta via linha de comando.

```bash
deep-research-cli "Qual Ã© a populaÃ§Ã£o do Brasil?"
```

### `[tui]` Modo Interface Interativa

Abre a interface TUI (Terminal User Interface) para interaÃ§Ã£o visual.

```bash
# Abrir TUI vazia (com campo de input)
deep-research-cli --tui

# Abrir TUI com pergunta prÃ©-definida
deep-research-cli --tui "Qual Ã© a capital da FranÃ§a?"
```

### `[budget]` Controle de Tokens

Define um limite de tokens para a pesquisa.

```bash
deep-research-cli --budget 500000 "pergunta complexa"
```

| Flag       | Tipo  | PadrÃ£o    | DescriÃ§Ã£o               |
| ---------- | ----- | --------- | ----------------------- |
| `--budget` | `u64` | 1.000.000 | Budget mÃ¡ximo de tokens |

### `[compare]` Modo ComparaÃ§Ã£o de Readers

Compara performance entre Jina Reader e Rust+OpenAI para extraÃ§Ã£o de conteÃºdo.

```bash
# Comparar URLs especÃ­ficas
deep-research-cli --compare "https://example.com,https://rust-lang.org"
```

### `[compare-live]` ComparaÃ§Ã£o em Tempo Real

Executa pesquisa com comparaÃ§Ã£o Jina vs Rust local durante o processo.

```bash
deep-research-cli --compare-live "Qual Ã© a linguagem de programaÃ§Ã£o mais usada?"
```

---

## âŒ¨ï¸ Atalhos TUI

### `[input]` Tela de Input

| Tecla       | AÃ§Ã£o                          |
| ----------- | ----------------------------- |
| `Enter`     | Iniciar pesquisa              |
| `Esc`       | Sair da aplicaÃ§Ã£o             |
| `Char`      | Digitar caractere             |
| `Backspace` | Apagar caractere anterior     |
| `Delete`    | Apagar caractere atual        |
| `â†` / `â†’`   | Mover cursor esquerda/direita |
| `Home`      | InÃ­cio da linha               |
| `End`       | Fim da linha                  |
| `â†‘`         | HistÃ³rico anterior            |
| `â†“`         | HistÃ³rico prÃ³ximo             |

### `[research]` Tela de Pesquisa

| Tecla       | AÃ§Ã£o                     |
| ----------- | ------------------------ |
| `q` / `Esc` | Sair da aplicaÃ§Ã£o        |
| `â†‘` / `k`   | Scroll para cima (logs)  |
| `â†“` / `j`   | Scroll para baixo (logs) |
| `PageUp`    | Scroll 5 linhas acima    |
| `PageDown`  | Scroll 5 linhas abaixo   |
| `ğŸ–±ï¸ Scroll` | Scroll com roda do mouse |

### `[result]` Tela de Resultado

| Tecla       | AÃ§Ã£o                             |
| ----------- | -------------------------------- |
| `Enter`     | Nova pesquisa (reset)            |
| `q` / `Esc` | Sair da aplicaÃ§Ã£o                |
| `â†‘` / `k`   | Scroll resposta para cima        |
| `â†“` / `j`   | Scroll resposta para baixo       |
| `PageUp`    | Page up na resposta              |
| `PageDown`  | Page down na resposta            |
| `Home`      | InÃ­cio da resposta               |
| `End`       | Fim da resposta                  |
| `c`         | **Copiar resposta p/ clipboard** |
| `ğŸ–±ï¸ Scroll` | Scroll com roda do mouse         |

---

## ğŸ–¥ï¸ Interface TUI

A TUI (Terminal User Interface) oferece uma experiÃªncia visual rica para acompanhar a pesquisa em tempo real.

### `[tui-guide]` ğŸ“– Guia de AnÃ¡lise da Interface

Esta seÃ§Ã£o explica como interpretar cada elemento visual da TUI.

---

## ğŸ¨ Anatomia Completa das Telas

### ğŸ“¥ TELA 1: INPUT (Entrada de Pergunta)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—       â”‚
â”‚    â•‘   ğŸ”¬ DEEP RESEARCH v0.1.0 - Pesquisa Inteligente com IA      â•‘  â†[A]  â”‚
â”‚    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•       â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ Digite sua pergunta â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚  â”‚ Ex: Qual Ã© a populaÃ§Ã£o do Brasil em 2024?                      â†[B]  â”‚ â”‚
â”‚ â”‚  â†‘                                                                      â”‚ â”‚
â”‚ â”‚ [C] Cursor piscante                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ ğŸ“œ HistÃ³rico (â†‘/â†“ para navegar) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚    8 Como funciona machine learning?                              â†[D]  â”‚ â”‚
â”‚ â”‚    7 Qual Ã© a capital da FranÃ§a?                                        â”‚ â”‚
â”‚ â”‚  â–¶ 6 O que Ã© Rust?                                                â†[E]  â”‚ â”‚
â”‚ â”‚    5 Explique computaÃ§Ã£o quÃ¢ntica                                       â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Enter Pesquisar   â†‘â†“ HistÃ³rico   Esc/q Sair                   â†[F]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Legenda da Tela de Input:

| Ref   | Elemento         | DescriÃ§Ã£o                                | Como Analisar                         |
| ----- | ---------------- | ---------------------------------------- | ------------------------------------- |
| `[A]` | Logo/Header      | Identifica a aplicaÃ§Ã£o e versÃ£o          | Confirme versÃ£o correta               |
| `[B]` | Placeholder      | Texto cinza de exemplo (some ao digitar) | Guia do formato esperado              |
| `[C]` | Cursor           | Barra `â”‚` amarela piscante               | Indica posiÃ§Ã£o de digitaÃ§Ã£o           |
| `[D]` | Item HistÃ³rico   | Pergunta anterior numerada               | NÃºmero indica ordem (maior = recente) |
| `[E]` | Item Selecionado | Marcado com `â–¶` e fundo cinza            | Enter para usar, Esc para cancelar    |
| `[F]` | Barra de Ajuda   | Atalhos disponÃ­veis                      | ReferÃªncia rÃ¡pida de comandos         |

#### Estados do Input:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESTADO: Vazio (placeholder visÃ­vel)                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â”‚ Ex: Qual Ã© a populaÃ§Ã£o do Brasil em 2024?               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ESTADO: Digitando (texto amarelo)                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ O que Ã© inteligÃªnciaâ”‚ artificial?                         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ESTADO: Navegando HistÃ³rico (borda amarela, item destacado)     â”‚
â”‚ â”Œâ”€ ğŸ“œ HistÃ³rico (Enter para usar, Esc para cancelar) â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  â–¶ 3 O que Ã© Rust?  â† SELECIONADO (fundo cinza)           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ” TELA 2: RESEARCH (Pesquisa em Andamento)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ” DEEP RESEARCH v0.1.0 â”‚ Pesquisando...                          â†[A]  â”‚ â”‚
â”‚ â”‚ Pergunta: Qual Ã© a populaÃ§Ã£o do Brasil em 2024?                   â†[B]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ ğŸ’­ RaciocÃ­nio do Agente â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€ ğŸ¯ AÃ§Ã£o Atual â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                          â”‚ â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ Preciso buscar dados demogrÃ¡ficos        â”‚ â”‚ â”‚  Step: 3            â†[D] â”‚ â”‚
â”‚ â”‚ atualizados sobre a populaÃ§Ã£o            â”‚ â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ brasileira. Vou consultar fontes    â†[C] â”‚ â”‚ â”‚  AÃ§Ã£o:                   â”‚ â”‚
â”‚ â”‚ oficiais como IBGE e Wikipedia...        â”‚ â”‚ â”‚  SEARCH             â†[E] â”‚ â”‚
â”‚ â”‚                                          â”‚ â”‚ â”‚                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ ğŸ“‹ Logs [3/15] â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€ ğŸ“Š Stats â”€â”€â” â”‚ â”Œâ”€ ğŸ‘¥ Personas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                        â”‚ â”‚ â”‚             â”‚ â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ [17:30:01] â„¹ï¸ Inician..â”‚ â”‚ â”‚ Step:    3  â”‚ â”‚ â”‚ â— Agente            â†[J] â”‚ â”‚
â”‚ â”‚ [17:30:02] âœ… 72 URLs  â”‚ â”‚ â”‚ URLs:   72  â”‚ â”‚ â”‚   S:2 R:4 A:0            â”‚ â”‚
â”‚ â”‚ [17:30:05] â„¹ï¸ Lendo ..â”‚â†[F]â”‚ Visit:   4â†[G]â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ [17:30:08] âœ… Wikipediaâ”‚ â”‚ â”‚ Tokens:1.2k â”‚ â”‚ â”‚ â—‹ Analyst           â†[K] â”‚ â”‚
â”‚ â”‚ [17:30:10] âš ï¸ Timeout â”‚ â”‚ â”‚ Tempo: 12s  â”‚ â”‚ â”‚   S:0 R:0 A:0            â”‚ â”‚
â”‚ â”‚ [17:30:12] â„¹ï¸ Retry...â”‚ â”‚ â”‚             â”‚ â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚                        â”‚ â”‚ â”‚ â•â•â•Sistemaâ•â•â”‚ â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚           â†‘â†“ scroll    â”‚ â”‚ â”‚ Threads: 8  â”‚ â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚                        â”‚ â”‚ â”‚ RAM: 45MBâ†[H]â”‚ â”‚ â”‚ Legenda:                â”‚ â”‚
â”‚ â”‚                        â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ S=Search R=Read A=Answer â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  45%   Step 3 - SEARCH    â†[I]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Legenda da Tela de Research:

| Ref   | Elemento           | O Que Mostra                     | Como Interpretar                    |
| ----- | ------------------ | -------------------------------- | ----------------------------------- |
| `[A]` | Status Icon        | ğŸ” Pesquisando / âœ… OK / âŒ Erro | Indica estado atual da operaÃ§Ã£o     |
| `[B]` | Pergunta           | Query sendo pesquisada           | Truncada se muito longa (>80 chars) |
| `[C]` | RaciocÃ­nio         | Pensamento atual do agente       | Mostra lÃ³gica de decisÃ£o do AI      |
| `[D]` | Step Counter       | NÃºmero do passo atual            | Aumenta a cada aÃ§Ã£o do agente       |
| `[E]` | AÃ§Ã£o Atual         | SEARCH/READ/REFLECT/ANSWER       | Indica operaÃ§Ã£o em execuÃ§Ã£o         |
| `[F]` | Logs com Scroll    | Eventos em tempo real            | `[n/total]` = posiÃ§Ã£o no scroll     |
| `[G]` | URLs Visitadas     | PÃ¡ginas jÃ¡ lidas                 | Visit < URLs = ainda tem trabalho   |
| `[H]` | MÃ©tricas Sistema   | Threads e memÃ³ria                | Monitore para detectar problemas    |
| `[I]` | Barra de Progresso | % estimado de conclusÃ£o          | Baseado em steps (mÃ¡x ~10)          |
| `[J]` | Persona Ativa      | `â—` verde = executando agora     | Mostra quem estÃ¡ trabalhando        |
| `[K]` | Persona Inativa    | `â—‹` cinza = aguardando           | Pode ser ativada em prÃ³ximos steps  |

#### Interpretando os Logs:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ÃCONES DE LOG E SEUS SIGNIFICADOS:                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [17:30:01] â„¹ï¸  Iniciando pesquisa...                           â”‚
â”‚             â†‘                                                   â”‚
â”‚             â””â”€â”€ INFO: OperaÃ§Ã£o normal em andamento              â”‚
â”‚                                                                 â”‚
â”‚  [17:30:02] âœ… 72 URLs encontradas                              â”‚
â”‚             â†‘                                                   â”‚
â”‚             â””â”€â”€ SUCCESS: OperaÃ§Ã£o concluÃ­da com Ãªxito           â”‚
â”‚                                                                 â”‚
â”‚  [17:30:05] âš ï¸  Rate limit, aguardando...                       â”‚
â”‚             â†‘                                                   â”‚
â”‚             â””â”€â”€ WARNING: AtenÃ§Ã£o necessÃ¡ria, mas recuperÃ¡vel    â”‚
â”‚                                                                 â”‚
â”‚  [17:30:08] âŒ Falha ao conectar com API                        â”‚
â”‚             â†‘                                                   â”‚
â”‚             â””â”€â”€ ERROR: Problema que pode afetar resultado       â”‚
â”‚                                                                 â”‚
â”‚  [17:30:10] ğŸ” Debug: response_size=4521                        â”‚
â”‚             â†‘                                                   â”‚
â”‚             â””â”€â”€ DEBUG: Info tÃ©cnica para diagnÃ³stico            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Fluxo Visual de AÃ§Ãµes:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CICLO DE VIDA DA PESQUISA                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚  SEARCH  â”‚ â”€â”€â”€â–¶ â”‚   READ   â”‚ â”€â”€â”€â–¶ â”‚ REFLECT  â”‚             â”‚
â”‚   â”‚ ğŸ” Busca â”‚      â”‚ ğŸ“– LÃª    â”‚      â”‚ ğŸ¤” Pensa â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚                 â”‚                 â”‚                    â”‚
â”‚        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                    â”‚
â”‚        â”‚    â”‚                         â”‚    â”‚                    â”‚
â”‚        â–¼    â–¼                         â–¼    â–¼                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚                  ANSWER                      â”‚              â”‚
â”‚   â”‚              âœï¸ Gera Resposta                â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                      â”‚
â”‚                          â–¼                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚     AVALIAÃ‡ÃƒO         â”‚                         â”‚
â”‚              â”‚  âœ… Aprovada â†’ FIM    â”‚                         â”‚
â”‚              â”‚  âŒ Reprovada â†’ LOOP  â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### âœ… TELA 3: RESULT (Resultado Final)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… PESQUISA CONCLUÃDA  â”‚  ğŸ†” 1fe4e43e                             â†[A]  â”‚ â”‚
â”‚ â”‚ ğŸ’¾ sessions/*_1fe4e43e.json  â”‚  ğŸ“„ logs/*_1fe4e43e.txt            â†[B]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ ğŸ“ Resposta [1/5] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                                       â”‚   â”‚
â”‚ â”‚ A populaÃ§Ã£o do Brasil em 2024 Ã© estimada em aproximadamente           â”‚   â”‚
â”‚ â”‚ 215 milhÃµes de habitantes, segundo dados do IBGE (Instituto     â†[C]  â”‚   â”‚
â”‚ â”‚ Brasileiro de Geografia e EstatÃ­stica).                               â”‚   â”‚
â”‚ â”‚                                                                       â”‚   â”‚
â”‚ â”‚ Principais caracterÃ­sticas demogrÃ¡ficas:                              â”‚   â”‚
â”‚ â”‚ â€¢ Taxa de crescimento: 0,52% ao ano                                   â”‚   â”‚
â”‚ â”‚ â€¢ Densidade demogrÃ¡fica: 25,2 hab/kmÂ²                                 â”‚   â”‚
â”‚ â”‚ â€¢ Expectativa de vida: 76,8 anos                                      â”‚   â”‚
â”‚ â”‚                                              [â†‘â†“ PgUp/Dn para scroll] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ ğŸ“š ReferÃªncias (3) - copie para acessar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  1. IBGE - ProjeÃ§Ã£o da populaÃ§Ã£o - https://ibge.gov.br/...      â†[D]  â”‚   â”‚
â”‚ â”‚  2. Wikipedia - Demografia do Brasil - https://pt.wikipedia...        â”‚   â”‚
â”‚ â”‚  3. DataSUS - Indicadores - https://datasus.saude.gov.br/...          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ ğŸ”— URLs Visitadas (5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  1. https://www.ibge.gov.br/estatisticas/sociais/populacao...   â†[E]  â”‚   â”‚
â”‚ â”‚  2. https://pt.wikipedia.org/wiki/Demografia_do_Brasil                â”‚   â”‚
â”‚ â”‚  3. https://agenciadenoticias.ibge.gov.br/...                         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ ğŸ“Š EstatÃ­sticas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  ğŸ« 18.543 tokens  â”‚  ğŸ”— 5 URLs  â”‚  ğŸ“Š 4 steps                   â†[F]  â”‚   â”‚
â”‚ â”‚  â±ï¸ 45.2s total  â”‚  ğŸ” 8.1s busca  â”‚  ğŸ“– 25.3s leitura  â”‚  ğŸ¤– 11.8s   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â†‘â†“/PgUp/Dn Scroll   Enter Nova   q Sair                  â†[G]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Legenda da Tela de Result:

| Ref   | Elemento        | O Que Mostra                  | Como Usar                              |
| ----- | --------------- | ----------------------------- | -------------------------------------- |
| `[A]` | UUID da SessÃ£o  | Identificador Ãºnico (8 chars) | Use para encontrar arquivos salvos     |
| `[B]` | Arquivos Salvos | Caminhos JSON e TXT           | Abra para anÃ¡lise detalhada            |
| `[C]` | Resposta        | Texto completo com scroll     | â†‘â†“ PgUp/Dn para navegar                |
| `[D]` | ReferÃªncias     | Fontes usadas na resposta     | Copie URLs para verificar              |
| `[E]` | URLs Visitadas  | Todas as pÃ¡ginas acessadas    | Pode incluir URLs que nÃ£o viraram refs |
| `[F]` | EstatÃ­sticas    | MÃ©tricas da pesquisa          | Analise para otimizaÃ§Ã£o                |
| `[G]` | Ajuda           | Atalhos disponÃ­veis           | Enter = nova pesquisa, q = sair        |

#### AnÃ¡lise de Performance:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               INTERPRETANDO ESTATÃSTICAS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ« TOKENS                                                      â”‚
â”‚  â”œâ”€ < 10.000   â†’ Pesquisa simples/trivial                       â”‚
â”‚  â”œâ”€ 10-50.000  â†’ Pesquisa normal                                â”‚
â”‚  â”œâ”€ 50-100.000 â†’ Pesquisa complexa                              â”‚
â”‚  â””â”€ > 100.000  â†’ Pesquisa muito profunda (cuidado com custo!)   â”‚
â”‚                                                                 â”‚
â”‚  â±ï¸ TEMPO TOTAL                                                 â”‚
â”‚  â”œâ”€ < 30s      â†’ RÃ¡pido (pergunta simples ou cache)             â”‚
â”‚  â”œâ”€ 30s - 2min â†’ Normal                                         â”‚
â”‚  â”œâ”€ 2-5min     â†’ Complexo (muitas URLs/iteraÃ§Ãµes)               â”‚
â”‚  â””â”€ > 5min     â†’ Muito complexo (considere simplificar query)   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š DISTRIBUIÃ‡ÃƒO DE TEMPO (ideal)                               â”‚
â”‚  â”œâ”€ ğŸ” Busca:   ~15-20% do total                                â”‚
â”‚  â”œâ”€ ğŸ“– Leitura: ~50-60% do total                                â”‚
â”‚  â””â”€ ğŸ¤– LLM:     ~25-30% do total                                â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ SINAIS DE PROBLEMA                                          â”‚
â”‚  â”œâ”€ Busca > 40%  â†’ API lenta ou muitas queries                  â”‚
â”‚  â”œâ”€ Leitura > 80% â†’ URLs lentas ou conteÃºdo pesado              â”‚
â”‚  â””â”€ LLM > 50%    â†’ Contexto muito grande                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸš¨ TELA DE ERRO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âŒ DEEP RESEARCH v0.1.0 â”‚ Erro                                          â”‚ â”‚
â”‚ â”‚ Pergunta: [query truncada se necessÃ¡rio...]                             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚   â•‘                                                                   â•‘    â”‚
â”‚   â•‘   âŒ ERRO: Rate limit exceeded - aguarde 60 segundos              â•‘    â”‚
â”‚   â•‘                                                                   â•‘    â”‚
â”‚   â•‘   Detalhes: API Jina retornou status 429                          â•‘    â”‚
â”‚   â•‘                                                                   â•‘    â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         Enter Tentar Novamente   q Sair                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Erros Comuns e SoluÃ§Ãµes:

| Erro                       | Causa                 | SoluÃ§Ã£o                                |
| -------------------------- | --------------------- | -------------------------------------- |
| `Rate limit exceeded`      | Muitas requisiÃ§Ãµes    | Aguarde 60s ou use `--budget` menor    |
| `OPENAI_API_KEY not found` | VariÃ¡vel nÃ£o definida | Configure `.env` ou `export`           |
| `JINA_API_KEY not found`   | VariÃ¡vel nÃ£o definida | Configure `.env` ou `export`           |
| `Network error`            | Sem conexÃ£o internet  | Verifique conectividade                |
| `Timeout`                  | URL demorou muito     | URL serÃ¡ marcada como "bad" e ignorada |
| `Beast Mode activated`     | >85% do budget usado  | Agente forÃ§arÃ¡ resposta com o que tem  |

---

### ğŸ¨ Mapa de Cores da Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PALETA DE CORES                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  CYAN      â†’ Headers, bordas principais, URLs             â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  YELLOW    â†’ Input focado, cursor, avisos                 â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  GREEN     â†’ Sucesso, persona ativa, progresso OK         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  RED       â†’ Erros, falhas                                â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  MAGENTA   â†’ EstatÃ­sticas, tokens                         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  BLUE      â†’ Logs panel, referÃªncias                      â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  WHITE     â†’ Texto principal, logs info                   â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  DARKGRAY  â†’ Placeholders, personas inativas              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“ ProporÃ§Ãµes do Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TELA DE PESQUISA                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  VERTICAL:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ Header                    â”‚ 4 linhas â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ RaciocÃ­nio + AÃ§Ã£o         â”‚ 8 linhas â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ Logs + Stats + Personas   â”‚ Restante â”‚ â† min 8 linhas        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ Barra de Progresso        â”‚ 3 linhas â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                 â”‚
â”‚  HORIZONTAL (Ã¡rea principal):                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Logs            â”‚  Stats   â”‚  Personas â”‚                    â”‚
â”‚  â”‚     55%          â”‚   22%    â”‚    23%    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â”‚  HORIZONTAL (topo):                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  RaciocÃ­nio                â”‚  AÃ§Ã£o Atual â”‚                   â”‚
â”‚  â”‚       70%                  â”‚     30%     â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”§ DiagnÃ³stico e Troubleshooting

#### Checklist de AnÃ¡lise:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CHECKLIST DE DIAGNÃ“STICO                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â–¡ 1. VERIFICAR LOGS                                            â”‚
â”‚     â””â”€ HÃ¡ erros (âŒ) ou warnings (âš ï¸)?                          â”‚
â”‚     â””â”€ O agente estÃ¡ progredindo ou travou?                     â”‚
â”‚                                                                 â”‚
â”‚  â–¡ 2. ANALISAR MÃ‰TRICAS                                         â”‚
â”‚     â””â”€ Tokens estÃ£o aumentando normalmente?                     â”‚
â”‚     â””â”€ URLs visitadas vs encontradas - proporÃ§Ã£o saudÃ¡vel?      â”‚
â”‚     â””â”€ MemÃ³ria RAM estÃ¡ estÃ¡vel?                                â”‚
â”‚                                                                 â”‚
â”‚  â–¡ 3. OBSERVAR RACIOCÃNIO                                       â”‚
â”‚     â””â”€ O agente entendeu a pergunta?                            â”‚
â”‚     â””â”€ EstÃ¡ buscando informaÃ§Ãµes relevantes?                    â”‚
â”‚     â””â”€ EstÃ¡ entrando em loop?                                   â”‚
â”‚                                                                 â”‚
â”‚  â–¡ 4. VERIFICAR PROGRESSO                                       â”‚
â”‚     â””â”€ Barra de progresso avanÃ§a?                               â”‚
â”‚     â””â”€ Steps incrementam?                                       â”‚
â”‚     â””â”€ AÃ§Ã£o muda (nÃ£o fica stuck em SEARCH)?                    â”‚
â”‚                                                                 â”‚
â”‚  â–¡ 5. CHECAR ARQUIVOS SALVOS                                    â”‚
â”‚     â””â”€ JSON em sessions/ contÃ©m dados?                          â”‚
â”‚     â””â”€ TXT em logs/ mostra timeline completa?                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### PadrÃµes de Comportamento:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PADRÃ•ES NORMAIS vs PROBLEMAS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âœ… NORMAL:                                                     â”‚
â”‚  â”œâ”€ Step aumenta a cada 5-15 segundos                           â”‚
â”‚  â”œâ”€ AlternÃ¢ncia entre SEARCH â†’ READ â†’ REFLECT                   â”‚
â”‚  â”œâ”€ URLs visitadas aumentam gradualmente                        â”‚
â”‚  â”œâ”€ Tokens crescem de forma constante                           â”‚
â”‚  â””â”€ Logs mostram mix de â„¹ï¸ e âœ…                                 â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ ATENÃ‡ÃƒO:                                                    â”‚
â”‚  â”œâ”€ Mesmo step por > 30 segundos                                â”‚
â”‚  â”œâ”€ Muitos âš ï¸ seguidos (rate limits)                            â”‚
â”‚  â”œâ”€ URLs visitadas = 0 apÃ³s vÃ¡rios steps                        â”‚
â”‚  â”œâ”€ RaciocÃ­nio repetitivo                                       â”‚
â”‚  â””â”€ Memoria RAM crescendo sem parar                             â”‚
â”‚                                                                 â”‚
â”‚  âŒ PROBLEMA:                                                    â”‚
â”‚  â”œâ”€ Erros âŒ repetidos                                          â”‚
â”‚  â”œâ”€ Step travado por > 60 segundos                              â”‚
â”‚  â”œâ”€ "Beast Mode activated" muito cedo                           â”‚
â”‚  â”œâ”€ Tokens > 80% do budget sem resposta                         â”‚
â”‚  â””â”€ ANSWER rejeitado mÃºltiplas vezes                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Como Ler os Arquivos de SessÃ£o:

```bash
# Ver sessÃ£o mais recente (JSON formatado)
cat sessions/$(ls -t sessions/ | head -1) | jq '.'

# Filtrar apenas logs de erro
cat sessions/*.json | jq '.logs[] | select(.level == "Error")'

# Ver estatÃ­sticas de todas as sessÃµes
for f in sessions/*.json; do
  echo "=== $f ==="
  jq '{question: .question[:50], tokens: .stats.tokens_used, time: .timing.total_ms}' "$f"
done

# Logs TXT (mais legÃ­vel)
less logs/$(ls -t logs/ | head -1)
```

---

### `[tui-layout]` Layout Visual Resumido

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ”¬ DEEP RESEARCH v0.1.0 - Pesquisa Inteligente com IA        â”‚
â”‚                   Pergunta: [query here]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’­ RaciocÃ­nio do Agente              â”‚ ğŸ¯ AÃ§Ã£o Atual           â”‚
â”‚                                       â”‚    Step: 3              â”‚
â”‚ Buscando informaÃ§Ãµes sobre...         â”‚    AÃ§Ã£o: SEARCH         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ Logs                              â”‚ ğŸ“Š Stats    â”‚ ğŸ‘¥ Personasâ”‚
â”‚                                       â”‚ URLs: 45    â”‚ â— Agente  â”‚
â”‚ [17:30:01] â„¹ï¸ Buscando...            â”‚ Visit: 4    â”‚   S:2 R:3 â”‚
â”‚ [17:30:02] âœ… 72 URLs encontradas    â”‚ Tokens:1234 â”‚           â”‚
â”‚ [17:30:03] â„¹ï¸ Lendo Wikipedia...     â”‚ Tempo: 5.2s â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  40%  Step 4 SEARCH â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### `[tui-screens]` Telas Implementadas

| Tela       | DescriÃ§Ã£o                                                | Componentes                                      |
| ---------- | -------------------------------------------------------- | ------------------------------------------------ |
| `Input`    | Entrada de pergunta com histÃ³rico                        | Logo, campo de input, lista de histÃ³rico, ajuda  |
| `Research` | Pesquisa em andamento com mÃ©tricas em tempo real         | Header, raciocÃ­nio, logs, stats, personas, gauge |
| `Result`   | Resultado final com resposta, referÃªncias e estatÃ­sticas | Header, resposta scrollÃ¡vel, refs, URLs, stats   |

### `[tui-components]` Componentes da Interface

#### Header (Todas as Telas)

| Elemento    | DescriÃ§Ã£o                               |
| ----------- | --------------------------------------- |
| Logo        | `ğŸ”¬ DEEP RESEARCH v0.1.0`               |
| Status Icon | ğŸ” Pesquisando / âœ… ConcluÃ­do / âŒ Erro |
| Pergunta    | Exibe a query atual (truncada)          |

#### Tela de Input

| Componente      | Funcionalidade                                |
| --------------- | --------------------------------------------- |
| Campo de Input  | Cursor UTF-8, placeholder, borda amarela      |
| Cursor Animado  | `â”‚` com RAPID_BLINK                           |
| Lista HistÃ³rico | Ãšltimas 8 perguntas, seleÃ§Ã£o com â–¶, navegÃ¡vel |
| Barra de Ajuda  | Atalhos: Enter, â†‘â†“, Esc                       |

#### Tela de Pesquisa

| Painel          | ConteÃºdo                                        |
| --------------- | ----------------------------------------------- |
| ğŸ’­ RaciocÃ­nio   | Pensamento atual do agente (70% largura)        |
| ğŸ¯ AÃ§Ã£o Atual   | Step e aÃ§Ã£o sendo executada (30% largura)       |
| ğŸ“‹ Logs         | Lista de eventos com scroll (55% largura)       |
| ğŸ“Š Stats        | Steps, URLs, tokens, tempo, sistema (22%)       |
| ğŸ‘¥ Personas     | Stats por persona: S(buscas), R(leituras) (23%) |
| Barra Progresso | Gauge 0-100% com status colorido                |

#### Tela de Resultado

| SeÃ§Ã£o             | ConteÃºdo                                           |
| ----------------- | -------------------------------------------------- |
| Header            | Status, UUID da sessÃ£o, caminhos dos arquivos      |
| ğŸ“ Resposta       | Texto completo com scroll vertical + **scrollbar** |
| ğŸ“š ReferÃªncias    | Top 3 referÃªncias com URLs clicÃ¡veis               |
| ğŸ”— URLs Visitadas | Top 3 URLs acessadas durante pesquisa              |
| ğŸ“Š EstatÃ­sticas   | Tokens, URLs, steps, tempos detalhados             |

**Novidades v0.1.x:**

- ğŸ–±ï¸ **Mouse scroll** - Roda do mouse funciona em todas as telas
- ğŸ“‹ **Copiar resposta** - Tecla `c` copia para clipboard do sistema
- ğŸ“œ **Scrollbar visual** - Indicador de posiÃ§Ã£o na resposta

### `[tui-state]` Estado da AplicaÃ§Ã£o (App)

```rust
pub struct App {
    // IdentificaÃ§Ã£o
    session_id: String,           // UUID Ãºnico da sessÃ£o
    started_at: String,           // Timestamp ISO 8601

    // Tela e Input
    screen: AppScreen,            // Input | Research | Result
    input_text: String,           // Texto sendo digitado
    cursor_pos: usize,            // PosiÃ§Ã£o do cursor (UTF-8 safe)

    // Pesquisa
    question: String,             // Pergunta atual
    current_step: usize,          // Step do agente
    current_action: String,       // AÃ§Ã£o sendo executada
    current_think: String,        // RaciocÃ­nio do agente

    // Dados Coletados
    logs: VecDeque<LogEntry>,     // Logs da sessÃ£o (max 100)
    url_count: usize,             // Total de URLs encontradas
    visited_count: usize,         // URLs visitadas
    visited_urls: Vec<String>,    // Lista de URLs visitadas
    tokens_used: u64,             // Tokens consumidos

    // Resultado
    answer: Option<String>,       // Resposta final
    references: Vec<String>,      // ReferÃªncias
    is_complete: bool,            // Pesquisa concluÃ­da
    error: Option<String>,        // Mensagem de erro

    // Tempos
    start_time: Option<Instant>,  // InÃ­cio da pesquisa
    total_time_ms: u128,          // Tempo total
    search_time_ms: u128,         // Tempo em buscas
    read_time_ms: u128,           // Tempo em leituras
    llm_time_ms: u128,            // Tempo em LLM

    // UI State
    log_scroll: usize,            // Scroll dos logs
    result_scroll: usize,         // Scroll da resposta
    history: Vec<String>,         // HistÃ³rico de perguntas
    history_index: Option<usize>, // Ãndice no histÃ³rico
    history_selected: Option<usize>, // SeleÃ§Ã£o visual

    // MÃ©tricas e Personas
    metrics: SystemMetrics,       // threads, memory_mb, cpu_percent
    personas: HashMap<String, PersonaStats>,

    // Tarefas Paralelas
    active_batches: HashMap<String, ParallelBatch>,
    completed_batches: Vec<ParallelBatch>,
    all_tasks: Vec<ParallelTask>,

    // PersistÃªncia
    saved_sessions: Vec<ResearchSession>,
}
```

### `[tui-metrics]` MÃ©tricas do Sistema

| MÃ©trica       | Tipo  | DescriÃ§Ã£o            |
| ------------- | ----- | -------------------- |
| `threads`     | usize | Threads ativas       |
| `memory_mb`   | f64   | Uso de memÃ³ria em MB |
| `cpu_percent` | f32   | Uso de CPU (%)       |

### `[tui-personas]` EstatÃ­sticas de Personas

| Campo       | Tipo   | DescriÃ§Ã£o              |
| ----------- | ------ | ---------------------- |
| `name`      | String | Nome da persona        |
| `searches`  | usize  | Buscas realizadas      |
| `reads`     | usize  | Leituras realizadas    |
| `answers`   | usize  | Respostas geradas      |
| `tokens`    | u64    | Tokens consumidos      |
| `is_active` | bool   | Se estÃ¡ ativa (â— vs â—‹) |

### `[tui-parallel]` Tarefas Paralelas

#### TaskStatus

| Status      | SÃ­mbolo | DescriÃ§Ã£o             |
| ----------- | ------- | --------------------- |
| `Pending`   | â³      | Aguardando inÃ­cio     |
| `Running`   | ğŸ”„      | Em execuÃ§Ã£o           |
| `Completed` | âœ…      | ConcluÃ­da com sucesso |
| `Failed`    | âŒ      | Falhou                |

#### ParallelTask

| Campo         | Tipo           | DescriÃ§Ã£o                |
| ------------- | -------------- | ------------------------ |
| `id`          | String         | ID Ãºnico da tarefa       |
| `batch_id`    | String         | ID do batch pai          |
| `task_type`   | String         | Tipo (Read, Search)      |
| `description` | String         | URL/descriÃ§Ã£o processada |
| `data_info`   | String         | Dados alocados           |
| `status`      | TaskStatus     | Status atual             |
| `started_at`  | u128           | Timestamp inÃ­cio (ms)    |
| `elapsed_ms`  | u128           | Tempo de execuÃ§Ã£o        |
| `thread_id`   | Option<String> | ID da thread             |

#### ParallelBatch

| Campo              | Tipo              | DescriÃ§Ã£o            |
| ------------------ | ----------------- | -------------------- |
| `id`               | String            | ID do batch          |
| `batch_type`       | String            | Tipo do batch        |
| `tasks`            | Vec<ParallelTask> | Tarefas no batch     |
| `started_at`       | u128              | Timestamp inÃ­cio     |
| `total_elapsed_ms` | u128              | Tempo total          |
| `completed`        | usize             | Tarefas completadas  |
| `failed`           | usize             | Tarefas que falharam |

### `[tui-persistence]` PersistÃªncia de SessÃµes

#### Arquivos Salvos

| Tipo | DiretÃ³rio   | Formato                      | ConteÃºdo                     |
| ---- | ----------- | ---------------------------- | ---------------------------- |
| JSON | `sessions/` | `YYYYMMDD_HHMMSS_UUID8.json` | SessÃ£o completa serializada  |
| TXT  | `logs/`     | `YYYYMMDD_HHMMSS_UUID8.txt`  | Logs formatados para leitura |

#### ResearchSession (JSON)

```json
{
  "id": "uuid-da-sessao",
  "started_at": "2024-01-15T10:30:00Z",
  "finished_at": "2024-01-15T10:31:45Z",
  "question": "Qual Ã© a populaÃ§Ã£o do Brasil?",
  "answer": "A populaÃ§Ã£o do Brasil...",
  "references": ["TÃ­tulo - URL", ...],
  "visited_urls": ["https://...", ...],
  "logs": [{"timestamp": "10:30:01", "level": "Info", "message": "..."}],
  "personas": {"Agente": {"searches": 2, "reads": 5, ...}},
  "timing": {"total_ms": 105000, "search_ms": 20000, ...},
  "stats": {"steps": 5, "urls_found": 45, "tokens_used": 18000},
  "success": true,
  "error": null,
  "parallel_batches": [...],
  "all_tasks": [...]
}
```

#### Formato TXT de Logs

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 DEEP RESEARCH - Session abc12345
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… InÃ­cio: 2024-01-15T10:30:00Z
â“ Pergunta: Qual Ã© a populaÃ§Ã£o do Brasil?
ğŸ“Š Steps: 5 | URLs: 4 | Tokens: 18000
â±ï¸  Tempo: 105.0s total | 20.0s busca | 50.0s leitura | 35.0s LLM

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 LOGS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[10:30:01] INFO Iniciando pesquisa...
[10:30:05] OK   72 URLs encontradas
[10:30:10] INFO Lendo Wikipedia...
...

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 URLs VISITADAS / REFERÃŠNCIAS / PERSONAS / TAREFAS PARALELAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 RESPOSTA FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A populaÃ§Ã£o do Brasil Ã© de aproximadamente...
```

### `[tui-colors]` Esquema de Cores

| Elemento          | Cor            | Uso                        |
| ----------------- | -------------- | -------------------------- |
| Header/Logo       | Cyan           | TÃ­tulo e bordas principais |
| Input Border      | Yellow         | Campo de entrada focado    |
| Cursor            | Yellow         | Cursor piscante            |
| Logs Info         | White          | Mensagens informativas     |
| Logs Success      | Green          | OperaÃ§Ãµes bem sucedidas    |
| Logs Warning      | Yellow         | Avisos                     |
| Logs Error        | Red            | Erros                      |
| Stats             | Magenta        | Painel de estatÃ­sticas     |
| Personas Active   | Green          | Persona ativa (â—)          |
| Personas Inactive | DarkGray       | Persona inativa (â—‹)        |
| Progress Bar      | Cyan/Green/Red | Baseado no estado          |
| References        | Blue           | Links de referÃªncia        |
| URLs Visited      | Cyan           | URLs visitadas             |

### `[tui-input]` ManipulaÃ§Ã£o de Input UTF-8

| MÃ©todo            | DescriÃ§Ã£o                             |
| ----------------- | ------------------------------------- |
| `input_char(c)`   | Insere caractere na posiÃ§Ã£o do cursor |
| `input_backspace` | Remove caractere antes do cursor      |
| `input_delete`    | Remove caractere na posiÃ§Ã£o do cursor |
| `cursor_left`     | Move cursor para esquerda             |
| `cursor_right`    | Move cursor para direita              |
| `cursor_home`     | Move cursor para inÃ­cio               |
| `cursor_end`      | Move cursor para fim                  |
| `history_up`      | Navega histÃ³rico anterior             |
| `history_down`    | Navega histÃ³rico seguinte             |
| `clear_input`     | Limpa todo o input                    |

### `[tui-scroll]` Sistema de Scroll

| MÃ©todo               | Ãrea     | DescriÃ§Ã£o             |
| -------------------- | -------- | --------------------- |
| `scroll_up`          | Logs     | Scroll 1 linha acima  |
| `scroll_down`        | Logs     | Scroll 1 linha abaixo |
| `result_scroll_up`   | Resposta | Scroll 1 linha acima  |
| `result_scroll_down` | Resposta | Scroll 1 linha abaixo |
| `result_page_up`     | Resposta | Page up (10 linhas)   |
| `result_page_down`   | Resposta | Page down (10 linhas) |

### `[tui-history]` Sistema de HistÃ³rico

| Funcionalidade | DescriÃ§Ã£o                            |
| -------------- | ------------------------------------ |
| Auto-save      | Perguntas salvas ao iniciar pesquisa |
| NavegaÃ§Ã£o â†‘/â†“  | Navega pelo histÃ³rico no input       |
| SeleÃ§Ã£o visual | Destaque com â–¶ e fundo cinza         |
| Carregamento   | Carrega de sessÃµes JSON anteriores   |
| Limite         | Ãšltimas 50 sessÃµes / 8 visÃ­veis      |

### `[tui-logger]` TuiLogger Wrapper

Helper para enviar eventos formatados:

```rust
impl TuiLogger {
    pub fn info(&self, msg: impl Into<String>);
    pub fn success(&self, msg: impl Into<String>);
    pub fn warning(&self, msg: impl Into<String>);
    pub fn error(&self, msg: impl Into<String>);
    pub fn set_step(&self, step: usize);
    pub fn set_action(&self, action: impl Into<String>);
    pub fn set_think(&self, think: impl Into<String>);
    pub fn set_urls(&self, total: usize, visited: usize);
    pub fn set_tokens(&self, tokens: u64);
    pub fn complete(&self, answer: String, references: Vec<String>);
}
```

---

## ğŸ¤– AÃ§Ãµes do Agente

O agente de pesquisa executa aÃ§Ãµes baseadas em uma mÃ¡quina de estados.

### `[search]` Buscar na Web

Executa buscas paralelas usando a API Jina.

```
SEARCH: Search the web (only if current URLs are insufficient)
```

**ParÃ¢metros:**

- `queries`: Lista de `SerpQuery` (query, tbs, location)
- `think`: RaciocÃ­nio do agente

**Limites:**

- MÃ¡ximo 5 queries por step
- ExecuÃ§Ã£o em paralelo

### `[read]` Ler ConteÃºdo

Extrai conteÃºdo de URLs (suporta mÃºltiplos formatos).

```
READ: Read URLs from the available list
```

**Formatos Suportados:**
| Tipo | ExtensÃµes |
|------|-----------|
| Web Pages | `.html`, `.htm` |
| PDF | `.pdf` |
| JSON | `.json` |
| XML | `.xml` |
| Texto | `.txt` |
| Markdown | `.md` |

**ParÃ¢metros:**

- `urls`: Lista de URLs para ler
- `think`: RaciocÃ­nio do agente

**Limites:**

- MÃ¡ximo 5 URLs por step
- ExecuÃ§Ã£o em paralelo
- URLs jÃ¡ visitadas sÃ£o ignoradas

### `[reflect]` Refletir/Gerar Sub-perguntas

Gera novas perguntas para expandir a pesquisa.

```
REFLECT: Generate sub-questions (use sparingly)
```

**ParÃ¢metros:**

- `gap_questions`: Lista de novas perguntas
- `think`: RaciocÃ­nio do agente

### `[answer]` Responder

Fornece a resposta final com referÃªncias.

```
ANSWER: Provide the final answer
```

**ParÃ¢metros:**

- `answer`: Texto da resposta
- `references`: Lista de referÃªncias
- `think`: RaciocÃ­nio do agente

**AvaliaÃ§Ãµes:**

- Passa por pipeline de avaliaÃ§Ã£o
- Verifica qualidade e precisÃ£o
- Pode ser rejeitada se insuficiente

### `[coding]` Executar CÃ³digo

Executa cÃ³digo em sandbox seguro com escolha automÃ¡tica de linguagem.

#### Linguagens Suportadas

| Linguagem  | Engine           | Melhor para                                                          |
| ---------- | ---------------- | -------------------------------------------------------------------- |
| JavaScript | Boa (in-process) | JSON, strings, cÃ¡lculos simples, transformaÃ§Ãµes rÃ¡pidas              |
| Python     | Subprocess       | AnÃ¡lise de dados, estatÃ­sticas, regex complexo, cÃ¡lculos cientÃ­ficos |
| Auto       | LLM escolhe      | O modelo decide a melhor linguagem baseado no problema               |

#### Formato da AÃ§Ã£o

```json
{
  "action": "coding",
  "code": "DescriÃ§Ã£o do problema a resolver",
  "language": "javascript|python|auto",
  "think": "raciocÃ­nio do agente"
}
```

#### SeguranÃ§a

- **JavaScript**: Executado via Boa Engine (isolado, sem acesso a filesystem/rede)
- **Python**: Executado via subprocess com timeout rigoroso
- Retry inteligente com feedback de erros para o LLM (atÃ© 3 tentativas)

**ParÃ¢metros:**

- `code`: CÃ³digo para executar
- `think`: RaciocÃ­nio do agente

---

## ğŸ“¡ Eventos

### `[agent-progress]` Eventos de Progresso do Agente

Enviados via callback durante execuÃ§Ã£o.

| Evento               | DescriÃ§Ã£o           | Dados                                             |
| -------------------- | ------------------- | ------------------------------------------------- |
| `Info(String)`       | Log informativo     | Mensagem                                          |
| `Success(String)`    | Log de sucesso      | Mensagem                                          |
| `Warning(String)`    | Log de aviso        | Mensagem                                          |
| `Error(String)`      | Log de erro         | Mensagem                                          |
| `Step(usize)`        | Atualiza step atual | NÃºmero do step                                    |
| `Action(String)`     | Atualiza aÃ§Ã£o atual | Nome da aÃ§Ã£o                                      |
| `Think(String)`      | RaciocÃ­nio atual    | Texto do raciocÃ­nio                               |
| `Urls(usize, usize)` | Contagem de URLs    | (total, visitadas)                                |
| `Tokens(u64)`        | Tokens usados       | Quantidade                                        |
| `Persona`            | Stats de persona    | name, searches, reads, answers, tokens, is_active |
| `VisitedUrl(String)` | URL visitada        | URL                                               |

### `[app-event]` Eventos da Interface TUI

Eventos internos para atualizaÃ§Ã£o da UI.

| Evento                         | DescriÃ§Ã£o                |
| ------------------------------ | ------------------------ |
| `Log(LogEntry)`                | Novo log                 |
| `SetStep(usize)`               | Define step              |
| `SetAction(String)`            | Define aÃ§Ã£o              |
| `SetThink(String)`             | Define raciocÃ­nio        |
| `SetUrlCount(usize)`           | Define total URLs        |
| `SetVisitedCount(usize)`       | Define URLs visitadas    |
| `SetTokens(u64)`               | Define tokens            |
| `SetAnswer(String)`            | Define resposta          |
| `SetReferences(Vec<String>)`   | Define referÃªncias       |
| `UpdateMetrics(SystemMetrics)` | MÃ©tricas do sistema      |
| `UpdatePersona(PersonaStats)`  | Stats de persona         |
| `SetTimes{...}`                | Tempos detalhados        |
| `Complete`                     | Pesquisa concluÃ­da       |
| `Error(String)`                | Erro fatal               |
| `AddVisitedUrl(String)`        | Adiciona URL visitada    |
| `StartBatch{...}`              | Inicia batch de tarefas  |
| `UpdateTask(ParallelTask)`     | Atualiza tarefa paralela |
| `EndBatch{...}`                | Finaliza batch           |

### `[log-level]` NÃ­veis de Log

| NÃ­vel     | SÃ­mbolo | Uso                   |
| --------- | ------- | --------------------- |
| `Info`    | â„¹ï¸      | InformaÃ§Ã£o geral      |
| `Success` | âœ…      | OperaÃ§Ã£o bem sucedida |
| `Warning` | âš ï¸      | Aviso                 |
| `Error`   | âŒ      | Erro                  |
| `Debug`   | ğŸ”      | Debug                 |

---

## âš™ï¸ ConfiguraÃ§Ã£o

### Estados do Agente

| Estado          | DescriÃ§Ã£o                              |
| --------------- | -------------------------------------- |
| `Processing`    | Processando (step, budget_used)        |
| `InputRequired` | Aguardando input do usuÃ¡rio (blocking) |
| `BeastMode`     | Modo forÃ§ado (>85% budget)             |
| `Completed`     | ConcluÃ­do com sucesso                  |
| `Failed`        | Falha definitiva                       |

---

## ğŸ’¬ Sistema de InteraÃ§Ã£o UsuÃ¡rio-Agente

O Deep Research implementa um sistema hÃ­brido de interaÃ§Ã£o entre o usuÃ¡rio e o agente, compatÃ­vel com a OpenAI Responses API (`input_required` state).

### VisÃ£o Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DeepResearchAgent                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   AgentState     â”‚    â”‚  InteractionHub  â”‚â—„â”€â”€ user_input_rx â”‚
â”‚  â”‚  - Running       â”‚    â”‚  - pending_qs    â”‚                  â”‚
â”‚  â”‚  - InputRequired â”‚    â”‚  - user_inputs   â”‚                  â”‚
â”‚  â”‚  - Completed     â”‚    â”‚  - callbacks     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚           â”‚                      â”‚                              â”‚
â”‚           â–¼                      â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚          AgentAction::AskUser            â”‚                  â”‚
â”‚  â”‚  - question_type: QuestionType           â”‚                  â”‚
â”‚  â”‚  - question: String                      â”‚                  â”‚
â”‚  â”‚  - options: Option<Vec<String>>          â”‚                  â”‚
â”‚  â”‚  - is_blocking: bool                     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                   â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚     TUI       â”‚   â”‚   Chatbot     â”‚
            â”‚  (dev/test)   â”‚   â”‚  (produÃ§Ã£o)   â”‚
            â”‚               â”‚   â”‚ digisac/suri  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Modos de InteraÃ§Ã£o

| Modo         | Comportamento                                         | Uso                               |
| ------------ | ----------------------------------------------------- | --------------------------------- |
| **Blocking** | Agente PAUSA e aguarda resposta                       | ClarificaÃ§Ã£o, confirmaÃ§Ã£o crÃ­tica |
| **Async**    | Mensagens entram na fila, processadas no prÃ³ximo step | Feedback, informaÃ§Ãµes adicionais  |

### Tipos de Pergunta (QuestionType)

| Tipo            | Blocking | DescriÃ§Ã£o                               |
| --------------- | -------- | --------------------------------------- |
| `Clarification` | âœ… Sim   | Falta informaÃ§Ã£o vital para continuar   |
| `Confirmation`  | âœ… Sim   | ConfirmaÃ§Ã£o antes de aÃ§Ã£o importante    |
| `Preference`    | âœ… Sim   | Escolha entre opÃ§Ãµes vÃ¡lidas            |
| `Suggestion`    | âŒ NÃ£o   | SugestÃ£o/feedback (processado no ciclo) |

### Atalhos TUI - InteraÃ§Ã£o Durante Pesquisa

| Tecla   | AÃ§Ã£o                                          |
| ------- | --------------------------------------------- |
| `Tab`   | Focar/desfocar campo de mensagem              |
| `Enter` | Enviar mensagem para o agente (quando focado) |
| `Esc`   | Desfocar input ou sair (quando nÃ£o focado)    |

### Layout da Tela de Pesquisa com Input

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” DEEP RESEARCH v0.1.0 â”‚ Pesquisando...                        â”‚
â”‚ Pergunta: [sua pergunta aqui...]                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’­ RaciocÃ­nio do Agente              â”‚ ğŸ¯ AÃ§Ã£o Atual           â”‚
â”‚                                       â”‚    Step: 3              â”‚
â”‚ Buscando informaÃ§Ãµes sobre...         â”‚    AÃ§Ã£o: SEARCH         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ Logs                              â”‚ ğŸ“Š Stats    â”‚ ğŸ‘¥ Personasâ”‚
â”‚ [17:30:01] â„¹ï¸ Buscando...            â”‚ URLs: 45    â”‚ â— Agente  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  40%  Step 4 SEARCH     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¬ Enviar mensagem â”‚ Tab: focar â”‚ Enter: enviar                â”‚â—€ NOVO!
â”‚ [_____________________________________________________ ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tela de Input Requerido (Blocking)

Quando o agente precisa de uma resposta crÃ­tica, a tela muda para:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â“ PERGUNTA DO AGENTE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Tipo: clarification                                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ VocÃª poderia confirmar se deseja que eu faÃ§a uma        â”‚   â”‚
â”‚  â”‚ busca via API especificamente no crate 'parrachos'      â”‚   â”‚
â”‚  â”‚ dentro do diretÃ³rio especificado?                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ Sua Resposta â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â–ˆ                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  Enter: Enviar resposta  â”‚  Esc: Cancelar                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layout com Sandbox Ativo

Quando o agente estÃ¡ executando cÃ³digo, um painel dedicado mostra o progresso:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” DEEP RESEARCH v0.1.0 â”‚ Pesquisando...                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’­ RaciocÃ­nio do Agente          â”‚ ğŸ–¥ï¸ SANDBOX                  â”‚
â”‚                                   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Preciso processar os dados        â”‚ ğŸ Python                   â”‚
â”‚ encontrados para extrair          â”‚ â³ GERANDO...               â”‚
â”‚ informaÃ§Ãµes estatÃ­sticas...       â”‚    1/3 tentativas           â”‚
â”‚                                   â”‚    timeout: 10000ms         â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â”‚ ğŸ“ Calcular mÃ©dia e desvio  â”‚
â”‚                                   â”‚    padrÃ£o dos valores...    â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â”‚ ğŸ’» CÃ³digo:                  â”‚
â”‚                                   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                   â”‚ â”‚ import statistics     â”‚   â”‚
â”‚                                   â”‚ â”‚ values = [...]        â”‚   â”‚
â”‚                                   â”‚ â”‚ mean = statistics...  â”‚   â”‚
â”‚                                   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  40%  Step 4 CODING     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Fluxo de ExecuÃ§Ã£o

#### Pergunta Blocking (ClarificaÃ§Ã£o)

```
1. LLM retorna AgentAction::AskUser { is_blocking: true, ... }
2. Agente emite AgentProgress::AgentQuestion
3. Agente muda estado para InputRequired
4. TUI mostra tela de pergunta dedicada
5. UsuÃ¡rio digita resposta e pressiona Enter
6. Resposta enviada via canal para InteractionHub
7. Agente processa e adiciona ao knowledge como UserProvided
8. Agente retoma execuÃ§Ã£o automaticamente
```

#### Input Async (Mensagem EspontÃ¢nea)

```
1. UsuÃ¡rio pressiona Tab durante pesquisa (foca input)
2. Digita mensagem e pressiona Enter
3. Mensagem entra na fila user_message_queue
4. Enviada via canal para o InteractionHub do agente
5. poll_user_messages() processa no prÃ³ximo step
6. Adicionado ao knowledge como UserProvided
7. LLM vÃª novo contexto e ajusta aÃ§Ãµes
```

### API: Compatibilidade OpenAI Responses

O estado `InputRequired` mapeia diretamente para o conceito de `input_required` da OpenAI:

```json
{
  "status": "input_required",
  "pending_input": {
    "type": "clarification",
    "question": "Qual Ã© a cidade de origem da sua viagem?",
    "options": null
  }
}
```

### MÃ³dulos do Sistema de InteraÃ§Ã£o

| MÃ³dulo              | Arquivo                | DescriÃ§Ã£o                          |
| ------------------- | ---------------------- | ---------------------------------- |
| **InteractionHub**  | `agent/interaction.rs` | Hub central de comunicaÃ§Ã£o         |
| **PendingQuestion** | `agent/interaction.rs` | Estrutura de pergunta pendente     |
| **UserResponse**    | `agent/interaction.rs` | Estrutura de resposta do usuÃ¡rio   |
| **QuestionType**    | `agent/interaction.rs` | Enum de tipos de pergunta          |
| **ChatbotAdapter**  | `agent/chatbot.rs`     | Trait para integraÃ§Ã£o com chatbots |
| **RichMessage**     | `agent/chatbot.rs`     | Mensagens formatadas com botÃµes    |

### Estruturas Principais

#### PendingQuestion

```rust
pub struct PendingQuestion {
    pub id: Uuid,                        // ID Ãºnico da pergunta
    pub question_type: QuestionType,     // Tipo (Clarification, Confirmation, etc.)
    pub question: String,                // Texto da pergunta
    pub options: Option<Vec<String>>,    // OpÃ§Ãµes (para Preference)
    pub is_blocking: bool,               // Se deve pausar atÃ© resposta
    pub created_at: DateTime<Utc>,       // Timestamp de criaÃ§Ã£o
}
```

#### UserResponse

```rust
pub struct UserResponse {
    pub question_id: Option<Uuid>,       // ID da pergunta (None = espontÃ¢nea)
    pub content: String,                 // ConteÃºdo da resposta
    pub timestamp: DateTime<Utc>,        // Timestamp
    pub selected_option: Option<usize>,  // Ãndice da opÃ§Ã£o selecionada
}
```

### IntegraÃ§Ã£o com Chatbots (ProduÃ§Ã£o)

A trait `ChatbotAdapter` permite integraÃ§Ã£o com plataformas de chat:

```rust
#[async_trait]
pub trait ChatbotAdapter: Send + Sync {
    /// Envia mensagem para o usuÃ¡rio
    async fn send_message(&self, message: &str) -> Result<(), ChatbotError>;

    /// Envia pergunta e aguarda resposta (blocking)
    async fn ask_user(&self, question: &PendingQuestion) -> Result<UserResponse, ChatbotError>;

    /// Envia opÃ§Ãµes para o usuÃ¡rio escolher
    async fn send_options(&self, question: &str, options: &[String]) -> Result<String, ChatbotError>;

    /// Tenta receber mensagem sem bloquear
    fn try_receive(&self) -> Result<Option<UserResponse>, ChatbotError>;

    /// Recebe mensagem (blocking com timeout)
    async fn receive_message(&self, timeout: Duration) -> Result<UserResponse, ChatbotError>;
}
```

#### Plataformas Suportadas (Futuro)

| Plataforma    | Status       | DescriÃ§Ã£o                      |
| ------------- | ------------ | ------------------------------ |
| **TUI**       | âœ… Pronto    | Interface terminal (dev/test)  |
| **DigiSac**   | ğŸ”œ Planejado | IntegraÃ§Ã£o via crate existente |
| **Suri**      | ğŸ”œ Planejado | API de mensagens (tlw_irus)    |
| **Parrachos** | ğŸ”œ Planejado | Webhook/callback para UI web   |

### Exemplo de Uso ProgramÃ¡tico

```rust
use deep_research::agent::{DeepResearchAgent, UserResponse};

// Criar agente com canais de interaÃ§Ã£o
let (agent, response_tx, question_rx) = DeepResearchAgent::new(llm, search, budget)
    .with_interaction_channels(16);

// Spawn task para processar perguntas
tokio::spawn(async move {
    while let Some(question) = question_rx.recv().await {
        println!("Agente pergunta: {}", question.question);

        // Obter resposta do usuÃ¡rio (ex: via stdin, chatbot, etc.)
        let user_input = get_user_input().await;

        // Enviar resposta de volta
        let response = UserResponse::to_question(question.id.to_string(), user_input);
        response_tx.send(response).await.unwrap();
    }
});

// Executar pesquisa
let result = agent.run("Minha pergunta complexa").await;
```

### Telas da TUI

| Tela       | DescriÃ§Ã£o             |
| ---------- | --------------------- |
| `Input`    | Entrada de pergunta   |
| `Research` | Pesquisa em andamento |
| `Result`   | Resultado final       |

### Constantes

```rust
const MAX_URLS_PER_STEP: usize = 5;       // URLs por step
const MAX_REFLECT_PER_STEP: usize = 5;    // Perguntas por reflexÃ£o
const BEAST_MODE_THRESHOLD: f64 = 0.85;   // 85% do budget
```

---

## ğŸ“š Exemplos

### Pesquisa Simples

```bash
deep-research-cli "Qual Ã© a capital da FranÃ§a?"
```

### Pesquisa com Budget Limitado

```bash
deep-research-cli --budget 100000 "Explique mecÃ¢nica quÃ¢ntica"
```

### Interface Interativa

```bash
deep-research-cli --tui
# Digite sua pergunta e pressione Enter
```

### Comparar MÃ©todos de Leitura

```bash
# Comparar extraÃ§Ã£o de conteÃºdo
deep-research-cli --compare "https://rust-lang.org,https://docs.rs"

# Comparar durante pesquisa
deep-research-cli --compare-live "O que Ã© Rust?"
```

---

## ğŸ“Š SaÃ­da do Resultado

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 RESULTADO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ Pesquisa concluÃ­da com sucesso!

Resposta:
[texto da resposta...]

ReferÃªncias:
  1. TÃ­tulo - URL
  2. ...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ESTATÃSTICAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â±ï¸  Tempo total: 12.34s
    - Busca:   2000ms
    - Leitura: 5000ms
    - LLM:     5000ms

ğŸ« Tokens utilizados:
    - Prompt:     15000
    - Completion: 3000
    - Total:      18000

ğŸ”— URLs visitadas: 5
```

---

## ğŸ”— Sistema de ReferÃªncias SemÃ¢nticas

O sistema de referÃªncias foi completamente redesenhado para fornecer citaÃ§Ãµes precisas usando embeddings e similaridade cosseno.

### Como Funciona

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PIPELINE DE REFERÃŠNCIAS SEMÃ‚NTICAS                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. CHUNKING DA RESPOSTA                                        â”‚
â”‚     â””â”€ chunk_text(answer) â†’ chunks[] + positions[]              â”‚
â”‚                                                                 â”‚
â”‚  2. CHUNKING DO CONTEÃšDO WEB                                    â”‚
â”‚     â””â”€ Para cada URL visitada: chunk_text(content)              â”‚
â”‚                                                                 â”‚
â”‚  3. EMBEDDINGS BATCH                                            â”‚
â”‚     â””â”€ llm.embed_batch([answer_chunks + web_chunks])            â”‚
â”‚                                                                 â”‚
â”‚  4. COSINE SIMILARITY (SIMD AVX2)                               â”‚
â”‚     â””â”€ simd::cosine_similarity(answer_emb, web_emb)             â”‚
â”‚                                                                 â”‚
â”‚  5. FILTRAGEM                                                   â”‚
â”‚     â””â”€ score >= 0.65, max 10 refs, dedup por URL/chunk          â”‚
â”‚                                                                 â”‚
â”‚  6. INSERÃ‡ÃƒO DE MARCADORES                                      â”‚
â”‚     â””â”€ "texto[^1] mais texto[^2]..."                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MÃ³dulos Envolvidos

| MÃ³dulo        | Arquivo               | FunÃ§Ã£o                                                      |
| ------------- | --------------------- | ----------------------------------------------------------- |
| **segment**   | `utils/segment.rs`    | Chunking de texto (newline, punctuation, characters, regex) |
| **build_ref** | `utils/build_ref.rs`  | ReferenceBuilder com embeddings e cosine similarity         |
| **simd**      | `performance/simd.rs` | Cosine similarity otimizado com AVX2                        |
| **llm**       | `llm.rs`              | GeraÃ§Ã£o de embeddings via OpenAI                            |

### ConfiguraÃ§Ã£o

```rust
ReferenceBuilderConfig {
    min_chunk_length: 80,      // MÃ­nimo de caracteres por chunk
    max_references: 10,         // MÃ¡ximo de referÃªncias
    min_relevance_score: 0.65,  // Score mÃ­nimo de similaridade
    only_hostnames: vec![],     // Filtro de hostnames (opcional)
}
```

### EstratÃ©gias de Chunking

| Tipo             | DescriÃ§Ã£o                   | Uso                |
| ---------------- | --------------------------- | ------------------ |
| `Newline`        | Split por `\n`              | ParÃ¡grafos, listas |
| `Punctuation`    | Split por `.!?ã€‚ï¼ï¼Ÿ`       | SentenÃ§as          |
| `Characters(n)`  | Split por N caracteres      | Textos longos      |
| `Regex(pattern)` | Split por regex customizado | Casos especiais    |

### Fallback Jaccard

Quando embeddings falham (rate limit, erro de API), o sistema usa Jaccard similarity:

```rust
fn jaccard_similarity(a: &str, b: &str) -> f32 {
    let words_a: HashSet<&str> = a.split_whitespace().collect();
    let words_b: HashSet<&str> = b.split_whitespace().collect();
    intersection / union
}
```

---

## ğŸ—‚ï¸ Estrutura de Arquivos

```
rust-implementation/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs          # CLI e TUI entry point
â”‚   â”œâ”€â”€ lib.rs           # Biblioteca principal
â”‚   â”œâ”€â”€ agent/           # MÃ¡quina de estados
â”‚   â”‚   â”œâ”€â”€ mod.rs       # Agente principal
â”‚   â”‚   â”œâ”€â”€ actions.rs   # AÃ§Ãµes do agente
â”‚   â”‚   â”œâ”€â”€ context.rs   # Contexto de pesquisa
â”‚   â”‚   â”œâ”€â”€ state.rs     # Estados
â”‚   â”‚   â””â”€â”€ permissions.rs
â”‚   â”œâ”€â”€ search.rs        # Cliente de busca (Jina)
â”‚   â”œâ”€â”€ llm.rs           # Cliente LLM (OpenAI)
â”‚   â”œâ”€â”€ tui/             # Interface TUI
â”‚   â”‚   â”œâ”€â”€ app.rs       # Estado da aplicaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ ui.rs        # RenderizaÃ§Ã£o
â”‚   â”‚   â””â”€â”€ runner.rs    # Loop principal
â”‚   â”œâ”€â”€ evaluation/      # AvaliaÃ§Ã£o de respostas
â”‚   â”œâ”€â”€ personas/        # Personas cognitivas
â”‚   â”œâ”€â”€ performance/     # OtimizaÃ§Ãµes SIMD
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ simd.rs      # AVX2 cosine similarity
â”‚   â””â”€â”€ utils/           # UtilitÃ¡rios
â”‚       â”œâ”€â”€ mod.rs
â”‚       â”œâ”€â”€ segment.rs   # Chunking de texto
â”‚       â”œâ”€â”€ build_ref.rs # ReferÃªncias semÃ¢nticas
â”‚       â”œâ”€â”€ file_reader.rs # Leitura de arquivos/PDFs
â”‚       â”œâ”€â”€ text.rs      # Processamento de texto
â”‚       â”œâ”€â”€ timing.rs    # MÃ©tricas de tempo
â”‚       â””â”€â”€ token_tracker.rs # Controle de tokens
â”œâ”€â”€ sessions/            # SessÃµes salvas (JSON)
â”œâ”€â”€ logs/                # Logs de sessÃµes (TXT)
â”œâ”€â”€ benches/             # Benchmarks Criterion
â””â”€â”€ Cargo.toml
```

---

## ğŸ“ LicenÃ§a

MIT License - Veja [LICENSE](LICENSE) para detalhes.
